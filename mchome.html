<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Media Center</title>
<style>
  :root {
    --text: #f5f5f5;
    --muted: #aaa;
    --accent: #1db954;
    --card-bg: #1a1a1a;
    --thumb-bg: #0d0d0d;
    --radius: 12px;
    --gap: 1rem;
    --shadow: rgba(0,0,0,0.6);
    --loading-bg: #2a3f31;
    --error-bg: #442222;
  }

  * {
    box-sizing: border-box;
  }

  html, body {
    margin: 0; 
    padding: 0;
    background: var(--thumb-bg);
    color: var(--text);
    font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
    overflow-x: hidden;
    min-height: 100vh;
    scrollbar-width: thin;
    scrollbar-color: var(--accent) var(--card-bg);
  }

  ::-webkit-scrollbar { 
    width: 8px; 
    height: 8px; 
  }
  ::-webkit-scrollbar-track { 
    background: var(--card-bg); 
  }
  ::-webkit-scrollbar-thumb { 
    background: var(--accent); 
    border-radius: 4px; 
  }

  /* HLAVIƒåKA */
  .main-title {
    text-align: center;
    font-size: 2.6rem;
    font-weight: bold;
    background: linear-gradient(135deg, #64B5F6 0%, #1db954 50%, #e91e63 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    padding: 24px 10px 14px;
    margin: 0 0 10px 0;
    animation: gradientShift 4s ease infinite;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* HODINY */
  .clock-container {
    text-align: center;
    padding: 12px 10px 14px;
    margin-bottom: 10px;
  }

  .clock-display {
    font-size: 1.6rem;
    font-weight: 600;
    color: #ffffff;
    font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
    letter-spacing: 2px;
    text-shadow: 0 0 15px rgba(29, 185, 84, 0.4);
  }

  /* NAVIGAƒåN√â TLAƒåIDL√Å */
  .nav-buttons-container {
    display: flex;
    gap: 14px;
    justify-content: center;
    flex-wrap: wrap;
    padding: 18px 10px;
    margin-bottom: 14px;
  }

  .nav-action-btn {
    padding: 16px 24px;
    border: 2px solid transparent;
    background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 9px;
    min-width: 110px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    position: relative;
    overflow: hidden;
  }

  .nav-action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(29, 185, 84, 0.2), transparent);
    transition: left 0.5s;
  }

  .nav-action-btn:hover::before {
    left: 100%;
  }

  .nav-action-btn:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
  }

  /* VYHƒΩAD√ÅVANIE A FILTER */
  .controls-container {
    max-width: 1200px;
    margin: 0 auto 20px;
    padding: 0 1rem;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .search-input {
    flex: 1;
    min-width: 250px;
    max-width: 400px;
    padding: 12px 16px;
    background: var(--card-bg);
    border: 2px solid transparent;
    border-radius: 10px;
    color: var(--text);
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 10px rgba(29, 185, 84, 0.3);
  }

  .stats {
    padding: 12px 16px;
    background: var(--card-bg);
    border-radius: 10px;
    color: var(--muted);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  /* SEKCIE */
  .webhome-section {
    padding: 18px 10px;
    margin-bottom: 14px;
    text-align: center;
  }

  .section-heading {
    font-weight: 600;
    font-size: 1.35rem;
    margin-bottom: 14px;
    color: #64B5F6;
    text-align: center;
  }

  .web-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    justify-content: center;
  }

  .web-btn {
    padding: 14px 20px;
    border: 2px solid transparent;
    background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.05rem;
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 9px;
    min-width: 105px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    position: relative;
    overflow: hidden;
  }

  .web-btn::before {
    content: 'üì∫';
    font-size: 1.6rem;
  }

  .radio-btn::before {
    content: 'üìª';
  }

  .web-btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(29, 185, 84, 0.2), transparent);
    transition: left 0.5s;
  }

  .web-btn:hover::after {
    left: 100%;
  }

  .web-btn:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
  }

  /* SPR√ÅVY */
  #rss-feed {
    max-width: 1200px;
    margin: 1rem auto;
    padding: 0 1rem;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--gap);
  }

  .item-card {
    background: var(--card-bg);
    border: 1px solid rgba(29, 185, 84, 0.1);
    border-radius: var(--radius);
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 12px var(--shadow);
    transition: all 0.3s ease;
    opacity: 0;
    animation: fadeIn 0.5s forwards;
    overflow: hidden;
  }

  .item-card:hover { 
    transform: translateY(-4px); 
    box-shadow: 0 8px 24px rgba(29, 185, 84, 0.3);
    border-color: var(--accent);
  }

  .item-thumb {
    width: 100%;
    height: 200px;
    object-fit: cover;
    background: #252525;
  }

  video.item-thumb {
    height: 220px;
  }

  .item-content { 
    padding: 1.2rem; 
    display: flex; 
    flex-direction: column; 
    flex: 1; 
  }

  .item-content h2 { 
    margin: 0 0 0.75rem; 
    font-size: 1.25rem; 
    color: var(--text);
    line-height: 1.4;
  }

  .item-content h2 a { 
    text-decoration: none; 
    color: inherit;
    transition: color 0.2s;
  }

  .item-content h2 a:hover {
    color: var(--accent);
  }

  .badges { 
    display: flex; 
    gap: 0.5rem; 
    margin-bottom: 0.75rem; 
    flex-wrap: wrap; 
  }

  .badge { 
    font-size: 0.75rem; 
    padding: 4px 8px; 
    background: var(--accent); 
    color: #fff; 
    border-radius: 6px;
    font-weight: 500;
  }

  .badge.source { 
    background: #444; 
  }

  .badge.today {
    background: #278a50;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  .item-content p { 
    flex: 1; 
    margin: 0 0 1rem; 
    font-size: 0.95rem; 
    color: var(--muted); 
    line-height: 1.6; 
  }

  .read-more-btn { 
    width: 100%; 
    max-width: 200px; 
    margin: 0 auto; 
    padding: 0.6rem 1rem; 
    font-size: 0.9rem; 
    background: var(--accent); 
    color: #fff; 
    border-radius: 8px; 
    text-align: center; 
    font-weight: 600; 
    text-decoration: none; 
    transition: all 0.3s ease; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    border: 2px solid var(--accent);
  }

  .read-more-btn:hover { 
    background: transparent;
    color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(29, 185, 84, 0.4);
  }

  .message-box {
    grid-column: 1 / -1;
    text-align: center;
    color: var(--text);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin: var(--gap) 0;
    font-size: 1rem;
    box-shadow: 0 2px 6px var(--shadow);
  }

  .loading-msg { 
    background: var(--loading-bg); 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    gap: 8px; 
    height: 60px; 
  }

  .error-msg { 
    background: var(--error-bg);
    font-weight: 600;
  }

  .end-msg {
    background: linear-gradient(135deg, #1a1a1a 0%, #252525 100%);
    color: var(--accent);
    font-weight: 600;
  }

  .no-results {
    background: var(--card-bg);
    color: var(--muted);
  }

  .dot {
    width: 12px; 
    height: 12px;
    background: var(--accent);
    border-radius: 50%;
    animation: blink 1.4s infinite both;
  }

  .dot:nth-child(1) { animation-delay: 0s; }
  .dot:nth-child(2) { animation-delay: 0.2s; }
  .dot:nth-child(3) { animation-delay: 0.4s; }

  @keyframes blink {
    0%, 80%, 100% { opacity: 0; transform: scale(0.8); }
    40% { opacity: 1; transform: scale(1.2); }
  }

  @keyframes fadeIn { 
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* MOBILN√â ZARIADENIA */
  @media (max-width: 768px) {
    body {
      font-size: 105%;
    }

    .main-title {
      font-size: 2.1rem;
      padding: 18px 10px 12px;
    }

    .clock-display {
      font-size: 1.4rem;
    }

    .nav-buttons-container {
      gap: 12px;
      padding: 14px 10px;
    }

    .nav-action-btn {
      padding: 14px 18px;
      font-size: 1rem;
      min-width: 100px;
    }

    .web-btn {
      padding: 12px 16px;
      font-size: 0.95rem;
      min-width: 95px;
    }

    .controls-container {
      flex-direction: column;
    }

    .search-input {
      max-width: 100%;
    }

    #rss-feed {
      grid-template-columns: 1fr;
      padding: 0 0.5rem;
    }

    .item-content h2 {
      font-size: 1.15rem;
    }
  }
</style>
</head>
<body>

<!-- NADPIS -->
<h1 class="main-title">MEDIA CENTER</h1>

<!-- HODINY -->
<div class="clock-container">
  <div class="clock-display" id="clock-display">00:00:00</div>
</div>

<!-- NAVIGAƒåN√â TLAƒåIDL√Å -->
<div class="nav-buttons-container">
  <button class="nav-action-btn" onclick="scrollToNews()">üì∞<br>Spr√°vy</button>
  <button class="nav-action-btn" onclick="window.open('https://pocasie.sk', '_blank')">üå§Ô∏è<br>Poƒçasie</button>
  <button class="nav-action-btn" onclick="window.open('https://youtube.com', '_blank')">üì∫<br>YouTube</button>
  <button class="nav-action-btn" onclick="window.open('https://stream.cz', '_blank')">üé¨<br>stream.cz</button>
</div>

<!-- TV STANICE -->
<div class="webhome-section">
  <div class="section-heading">üì∫ Obƒæ√∫ben√© TV stanice</div>
  <div class="web-buttons">
    <a href="intent://212.102.38.45/live/test_jednotka_25p/playlist.m3u8#Intent;scheme=http;package=org.videolan.vlc;type=video/*;S.browser_fallback_url=https://play.google.com/store/apps/details?id=org.videolan.vlc;end" target="_blank" class="web-btn">Jednotka HD</a>
    <a href="intent://cdnsk003.panaccess.com/local/Markiza/index.m3u8#Intent;scheme=https;package=org.videolan.vlc;type=video/*;S.browser_fallback_url=https://play.google.com/store/apps/details?id=org.videolan.vlc;end" target="_blank" class="web-btn">Mark√≠za</a>
    <a href="intent://212.102.38.45/live/test_joj_25p/playlist.m3u8#Intent;scheme=http;package=org.videolan.vlc;type=video/*;S.browser_fallback_url=https://play.google.com/store/apps/details?id=org.videolan.vlc;end" target="_blank" class="web-btn">JOJ</a>
    <a href="intent://212.102.38.45/live/test_ta3_25p/playlist.m3u8#Intent;scheme=http;package=org.videolan.vlc;type=video/*;S.browser_fallback_url=https://play.google.com/store/apps/details?id=org.videolan.vlc;end" target="_blank" class="web-btn">TA3</a>
  </div>
</div>

<!-- R√ÅDIOV√â STANICE -->
<div class="webhome-section">
  <div class="section-heading">üìª Obƒæ√∫ben√© r√°diov√© stanice</div>
  <div class="web-buttons">
    <a href="https://dash3.antik.sk/live/test_slovensko_radio/playlist.m3u8" target="_blank" class="web-btn radio-btn">R√°dio Slovensko</a>
  </div>
</div>

<!-- VYHƒΩAD√ÅVANIE A ≈†TATISTIKY -->
<div class="controls-container">
  <input type="text" id="search-input" class="search-input" placeholder="üîç Vyhƒæada≈• v spr√°vach...">
  <div class="stats" id="stats">üìä Naƒç√≠tavam...</div>
</div>

<!-- SPR√ÅVY -->
<div id="rss-feed">
  <div class="message-box loading-msg">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>
</div>

<script>
// ===== HODINY =====
function updateClock() {
  const now = new Date();
  const hours = String(now.getHours()).padStart(2, '0');
  const minutes = String(now.getMinutes()).padStart(2, '0');
  const seconds = String(now.getSeconds()).padStart(2, '0');
  document.getElementById('clock-display').textContent = `${hours}:${minutes}:${seconds}`;
}
setInterval(updateClock, 1000);
updateClock();

// ===== SCROLL K SPR√ÅVAM =====
function scrollToNews() {
  document.getElementById('rss-feed').scrollIntoView({ behavior: 'smooth' });
}

// ===== RSS FEED =====
(async function(){
  const FEEDS = [
    "https://spravy.pravda.sk/rss/xml",
    "https://domov.sme.sk/rss",
    "https://hnonline.sk/feed",
    "https://touchit.sk/feed",
    "https://www.teraz.sk/rss/vsetky-spravy.rss",
    "https://www.startitup.sk/feed/",
    "https://www.ta3.com/rss/5/spravy",
    "https://www.info.sk/rss/",
    "https://www.novinky.cz/rss",
    "https://www.imeteo.sk/rss/news",
    "https://spravy.pravda.sk/regiony/rss/xml/",
    "https://sita.sk/feed/",
    "https://www.ceskenoviny.cz/sluzby/rss/zpravy.php",
    "https://refresher.sk/rss",
    "https://www.bratislavak.sk/rss",
    "https://sportweb.pravda.sk/rss/xml/",
    "https://www.aktuality.sk/rss/",
    "https://zive.aktuality.sk/rss/najnovsie/",
    "https://www.zive.cz/rss",
    "https://www.reflex.cz/rss",
    "https://www.mojandroid.sk/feed/atom/",
    "https://androidportal.sk/feed/",
    "https://spravy.stvr.sk/feed/",
    "https://www.blesk.cz/rss",
    "https://www.newsbyte.sk/feed/",
    "https://ereport.sk/feed",
    "https://standard.sk/feed",
    "https://www.postoj.sk/rss"
  ];

  const PAGE_SIZE = 12;
  const BATCH_SIZE = 5;
  let allItems = [];
  let filteredItems = [];
  let index = 0;
  let isLoading = false;
  let searchTerm = "";

  // Set pre sledovanie unik√°tnych URL
  const seenUrls = new Set();

  async function fetchXMLFeed(url) {
    try {
      const res = await fetch("https://corsproxy.io/?" + encodeURIComponent(url));
      const text = await res.text();
      const xml = new DOMParser().parseFromString(text, "text/xml");
      const channel = xml.querySelector("channel");
      const source = channel?.querySelector("title")?.textContent || url;

      const items = [...xml.querySelectorAll("item")].map(item => {
        let pub = new Date(
          item.querySelector("pubDate")?.textContent ||
          item.querySelector("updated")?.textContent ||
          item.querySelector("dc\\:date")?.textContent ||
          item.querySelector("date")?.textContent ||
          ""
        );
        if (isNaN(pub)) pub = new Date();

        let thumb = "", video = "";
        const enclosure = item.querySelector("enclosure");
        if (enclosure) {
          const type = enclosure.getAttribute("type") || "";
          const url = enclosure.getAttribute("url") || "";
          if (type.startsWith("image")) thumb = url;
          else if (type.startsWith("video")) video = url;
        }

        if (!thumb) {
          const media = item.querySelector("media\\:content, content");
          if (media && media.getAttribute("url")) thumb = media.getAttribute("url");
          else {
            const descHTML = item.querySelector("description")?.textContent || "";
            const match = descHTML.match(/<img[^>]+src="([^">]+)"/);
            if (match) thumb = match[1];
          }
        }

        let rawDesc = item.querySelector("description")?.textContent || "";
        rawDesc = rawDesc.replace(/<[^>]*>/g, "").trim();

        const descLimit = 200;
        let shortDesc = rawDesc.slice(0, descLimit);
        if (rawDesc.length > descLimit) {
          const lastSpace = shortDesc.lastIndexOf(" ");
          if (lastSpace > 0) shortDesc = shortDesc.slice(0, lastSpace);
        }

        return {
          title: item.querySelector("title")?.textContent || "",
          link: item.querySelector("link")?.textContent || "",
          desc: shortDesc,
          pubDate: pub,
          source,
          thumb,
          video
        };
      }).filter(i => i.title && i.link);

      return items;
    } catch (e) {
      console.warn("Nepodarilo sa naƒç√≠ta≈• feed:", url, e);
      return [];
    }
  }

  const container = document.getElementById("rss-feed");
  const statsEl = document.getElementById("stats");
  const searchInput = document.getElementById("search-input");

  const videoObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const video = entry.target;
        if (video.dataset.src) {
          video.src = video.dataset.src;
          video.load();
          observer.unobserve(video);
        }
      }
    });
  }, { rootMargin: "200px" });

  function createLoader() {
    const loader = document.createElement("div");
    loader.className = "message-box loading-msg";
    loader.innerHTML = '<div class="dot"></div><div class="dot"></div><div class="dot"></div>';
    return loader;
  }

  function updateStats() {
    const uniqueCount = allItems.length;
    const filteredCount = filteredItems.length;
    if (searchTerm) {
      statsEl.textContent = `üìä ${filteredCount} z ${uniqueCount} spr√°v`;
    } else {
      statsEl.textContent = `üìä ${uniqueCount} unik√°tnych spr√°v`;
    }
  }

  function clearFeed() {
    const cards = container.querySelectorAll(".item-card");
    cards.forEach(card => card.remove());
    const messages = container.querySelectorAll(".message-box:not(.loading-msg)");
    messages.forEach(msg => msg.remove());
  }

  function renderNext() {
    if (isLoading) return;
    
    // Skontroluj, ƒçi u≈æ nie sme na konci
    if (index >= filteredItems.length) return;
    
    isLoading = true;

    // Odstr√°≈à v≈°etky predo≈°l√© loadery
    const prevLoaders = container.querySelectorAll(".loading-msg");
    prevLoaders.forEach(loader => loader.remove());

    const loader = createLoader();
    container.appendChild(loader);

    setTimeout(() => {
      const slice = filteredItems.slice(index, index + PAGE_SIZE);
      
      if (slice.length === 0 && index === 0) {
        loader.remove();
        const noResults = document.createElement("div");
        noResults.className = "message-box no-results";
        noResults.textContent = "üîç Nena≈°li sa ≈æiadne spr√°vy";
        container.appendChild(noResults);
        isLoading = false;
        return;
      }

      slice.forEach(i => {
        const card = document.createElement("div");
        card.className = "item-card";

        const isToday = i.pubDate.toDateString() === new Date().toDateString();
        const badgeDate = `${i.pubDate.toLocaleDateString("sk-SK")} ${i.pubDate.toLocaleTimeString("sk-SK", {hour: "2-digit", minute: "2-digit"})}`;

        card.innerHTML = `
          ${i.video 
            ? `<video class="item-thumb lazy-video" data-src="${i.video}" controls preload="metadata"></video>` 
            : (i.thumb ? `<img class="item-thumb" src="${i.thumb}" alt="${i.title}" loading="lazy">` : ``)
          }
          <div class="item-content">
            <h2><a href="${i.link}" target="_blank" rel="noopener noreferrer">${i.title}</a></h2>
            <div class="badges">
              <span class="badge ${isToday ? 'today' : ''}">${isToday ? 'üü¢ ' : ''}${badgeDate}</span>
              <span class="badge source">${i.source}</span>
            </div>
            <p>${i.desc}${i.desc ? '‚Ä¶' : ''}</p>
            <a class="read-more-btn" href="${i.link}" target="_blank" rel="noopener noreferrer">ƒå√≠ta≈• viac</a>
          </div>
        `;
        
        // Vlo≈æ kartu pred loader
        container.insertBefore(card, loader);

        const video = card.querySelector("video.lazy-video");
        if (video) videoObserver.observe(video);
      });

      loader.remove();
      index += slice.length;
      isLoading = false;

      // Skontroluj, ƒçi sme na konci a ak √°no, pridaj end message a odstr√°≈à listener
      if (index >= filteredItems.length) {
        // Odstr√°≈à ak√Ωkoƒævek zost√°vaj√∫ci loader
        const remainingLoaders = container.querySelectorAll(".loading-msg");
        remainingLoaders.forEach(l => l.remove());
        
        const end = document.createElement("div");
        end.className = "message-box end-msg";
        end.textContent = "‚úì V≈°etky spr√°vy naƒç√≠tan√©";
        container.appendChild(end);
        window.removeEventListener("scroll", onScroll);
      }
    }, 400);
  }

  function filterItems() {
    const term = searchTerm.toLowerCase();
    if (!term) {
      filteredItems = [...allItems];
    } else {
      filteredItems = allItems.filter(item => 
        item.title.toLowerCase().includes(term) ||
        item.desc.toLowerCase().includes(term) ||
        item.source.toLowerCase().includes(term)
      );
    }
    updateStats();
  }

  function resetAndRender() {
    clearFeed();
    index = 0;
    isLoading = false; // Reset loading stavu
    filterItems();
    
    // Odstr√°≈à star√Ω scroll listener
    window.removeEventListener("scroll", onScroll);
    
    // Pridaj poƒçiatoƒçn√Ω loader
    const loader = createLoader();
    container.appendChild(loader);
    
    renderNext();
    
    // Pridaj nov√Ω scroll listener
    window.addEventListener("scroll", onScroll, { passive: true });
  }

  function onScroll() {
    if (isLoading) return;
    if (window.innerHeight + window.scrollY + 200 >= document.body.scrollHeight) {
      renderNext();
    }
  }

  // Vyhƒæad√°vanie s debounce
  let searchTimeout;
  searchInput.addEventListener("input", (e) => {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(() => {
      searchTerm = e.target.value.trim();
      resetAndRender();
    }, 300);
  });

  // Naƒç√≠tavanie feedov po d√°vkach
  for (let i = 0; i < FEEDS.length; i += BATCH_SIZE) {
    const batch = FEEDS.slice(i, i + BATCH_SIZE);
    const results = await Promise.all(batch.map(fetchXMLFeed));
    const newItems = results.flat();
    
    // Odstr√°nenie duplic√≠t pomocƒÖ Set na sledovanie URL
    newItems.forEach(item => {
      if (!seenUrls.has(item.link)) {
        seenUrls.add(item.link);
        allItems.push(item);
      }
    });

    // Zoradenie v≈°etk√Ωch polo≈æiek po d√°tume
    allItems.sort((a, b) => b.pubDate - a.pubDate);
    
    if (i === 0) {
      resetAndRender();
    } else {
      // Aktualiz√°cia u≈æ zobrazen√Ωch polo≈æiek
      updateStats();
    }
  }

  // Fin√°lna aktualiz√°cia po naƒç√≠tan√≠ v≈°etk√Ωch feedov
  updateStats();
})();
</script>

</body>
</html>
